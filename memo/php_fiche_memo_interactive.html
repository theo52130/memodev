<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mémo PHP</title>
    <link rel="stylesheet" href="css/style-php.css">
    <link rel="icon" href="assets/favicon.svg" type="image/svg+xml">
</head>
<body>
    <header>
        <div class="header-container">
            <a href="../index.html" class="back-button" title="Retour à l'accueil">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
            </a>
            <h1>Mémo PHP</h1>
        </div>
        <nav>
            <ul>
                <li class="dropdown">
                    <a href="#debutant">Niveau Débutant</a>
                    <ul class="dropdown-content">
                        <li><a href="#concepts-base">Concepts de Base</a></li>
                        <li><a href="#variables-types">Variables et Types</a></li>
                        <li><a href="#structures-controle">Structures de contrôle</a></li>
                        <li><a href="#fonctions-base">Fonctions de base</a></li>
                        <li><a href="#hello-world">Hello World</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="#intermediaire">Niveau Intermédiaire</a>
                    <ul class="dropdown-content">
                        <li><a href="#tableaux-avances">Tableaux avancés</a></li>
                        <li><a href="#structures-avancees">Structures de contrôle avancées</a></li>
                        <li><a href="#fonctions-avancees">Fonctions avancées</a></li>
                        <li><a href="#traitement-formulaire">Traitement de formulaire</a></li>
                        <li><a href="#inclusion-fichiers">Inclusion de fichiers</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="#avance">Niveau Avancé</a>
                    <ul class="dropdown-content">
                        <li><a href="#poo">Programmation Orientée Objet</a></li>
                        <li><a href="#heritage-interfaces">Héritage et interfaces</a></li>
                        <li><a href="#namespace-autoloading">Namespace et autoloading</a></li>
                        <li><a href="#bases-donnees">Bases de Données avec PDO</a></li>
                        <li><a href="#gestion-erreurs">Gestion des erreurs</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="#frameworks">Frameworks</a>
                    <ul class="dropdown-content">
                        <li><a href="#frameworks-complets">Frameworks Complets</a></li>
                        <li><a href="#micro-frameworks">Micro-frameworks</a></li>
                        <li><a href="#cms-php">CMS basés sur PHP</a></li>
                        <li><a href="#exemple-laravel">Exemple Laravel</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="#securite">Sécurité</a>
                    <ul class="dropdown-content">
                        <li><a href="#protections-essentielles">Protections essentielles</a></li>
                        <li><a href="#hashage-securise">Hashage sécurisé</a></li>
                        <li><a href="#protection-csrf">Protection CSRF</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="#bonnes-pratiques">Bonnes Pratiques</a>
                    <ul class="dropdown-content">
                        <li><a href="#architecture-mvc">Architecture MVC</a></li>
                        <li><a href="#validation">Validation des données</a></li>
                        <li><a href="#structure-projet">Structure de projet</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="#ressources">Ressources</a>
                    <ul class="dropdown-content">
                        <li><a href="#documentation">Documentation</a></li>
                        <li><a href="#tutoriels">Tutoriels</a></li>
                        <li><a href="#communaute">Communauté</a></li>
                    </ul>
                </li>
            </ul>
        </nav>
    </header>

    <main>
        <section id="debutant">
            <h2>Niveau Débutant</h2>
            
            <h3 id="concepts-base">Concepts de Base</h3>
            <p>PHP est un langage de script côté serveur utilisé pour le développement web. Voici quelques concepts fondamentaux :</p>
            <ul>
                <li><strong>Server-side</strong> : Le code PHP est exécuté sur le serveur, pas dans le navigateur de l'utilisateur</li>
                <li><strong>Intégration HTML</strong> : PHP peut être incorporé directement dans le HTML</li>
                <li><strong>Extension de fichier</strong> : Les fichiers PHP utilisent l'extension .php</li>
                <li><strong>Serveur web</strong> : Nécessite Apache, Nginx ou un serveur compatible</li>
                <li><strong>Accès aux fichiers</strong> : PHP peut lire et écrire des fichiers sur le serveur</li>
                <li><strong>Sessions et cookies</strong> : Gestion d'état entre les requêtes</li>
            </ul>
            
            <h3 id="variables-types">Variables et Types de Données</h3>
            <pre>
# Déclaration de variables en PHP
<code>$nom = "Jean";               // Chaîne de caractères</code>
<code>$age = 25;                  // Entier</code>
<code>$prix = 19.99;              // Flottant</code>
<code>$est_actif = true;          // Booléen</code>
<code>$tableau = ["un", "deux"];  // Tableau</code>
<code>$personne = null;           // Null</code>
            </pre>
            
            <h3 id="structures-controle">Structures de contrôle de base</h3>
            <pre>
# Conditions if/else
<code>if ($age >= 18) {
    echo "Majeur";
} else {
    echo "Mineur";
}</code>

# Boucle for simple
<code>for ($i = 0; $i < 5; $i++) {
    echo $i;
}</code>

# Boucle while
<code>$compteur = 0;
while ($compteur < 5) {
    echo $compteur;
    $compteur++;
}</code>
            </pre>
            
            <h3 id="fonctions-base">Premiers pas avec les fonctions</h3>
            <pre>
# Définition d'une fonction simple
<code>function saluer($nom) {
    return "Bonjour, " . $nom;
}</code>

# Appel de la fonction
<code>echo saluer("Marie");</code>
            </pre>

            <h3 id="hello-world">Hello World en PHP</h3>
            <pre>
# Script PHP minimal
<code>&lt;?php
echo "Bonjour, monde!";
?&gt;</code>
            </pre>
        </section>

        <section id="intermediaire">
            <h2>Niveau Intermédiaire</h2>
            
            <h3 id="tableaux-avances">Tableaux avancés</h3>
            <pre>
# Tableau indexé
<code>$fruits = ["pomme", "banane", "orange"];
echo $fruits[0]; // pomme</code>

# Tableau associatif
<code>$utilisateur = [
    "nom" => "Dupont",
    "prenom" => "Jean",
    "age" => 42
];
echo $utilisateur["nom"]; // Dupont</code>

# Tableau multidimensionnel
<code>$utilisateurs = [
    ["id" => 1, "nom" => "Dupont", "ville" => "Paris"],
    ["id" => 2, "nom" => "Martin", "ville" => "Lyon"]
];
echo $utilisateurs[1]["ville"]; // Lyon</code>

# Fonctions de tableau utiles
<code>$nombres = [5, 2, 8, 1];
sort($nombres);           // Trie le tableau
$somme = array_sum($nombres); // Somme des valeurs
$existe = in_array(8, $nombres); // Vérifie si la valeur existe
$cle = array_search(8, $nombres); // Trouve la clé d'une valeur</code>
            </pre>
            
            <h3 id="structures-avancees">Structures de contrôle avancées</h3>
            <pre>
# Switch
<code>switch ($jour) {
    case 'lundi':
        echo "Début de semaine";
        break;
    case 'vendredi':
        echo "Fin de semaine";
        break;
    default:
        echo "Jour de semaine";
}</code>

# foreach avec clé et valeur
<code>$utilisateur = ["nom" => "Dupont", "prenom" => "Jean", "age" => 42];
foreach ($utilisateur as $cle => $valeur) {
    echo "$cle: $valeur<br>";
}</code>

# Opérateur ternaire
<code>$message = ($age >= 18) ? "Majeur" : "Mineur";</code>

# Opérateur Null coalescing
<code>$nom = $_GET['nom'] ?? "Anonyme";</code>
            </pre>
            
            <h3 id="fonctions-avancees">Fonctions avancées</h3>
            <pre>
# Fonction avec paramètres par défaut
<code>function calculerPrix($prix, $tauxTVA = 0.2) {
    return $prix * (1 + $tauxTVA);
}</code>

# Fonctions anonymes
<code>$doubler = function($x) {
    return $x * 2;
};
echo $doubler(5); // 10</code>

# Utilisation de fonctions de callback
<code>$nombres = [1, 2, 3, 4, 5];
$carres = array_map(function($n) {
    return $n * $n;
}, $nombres);</code>
            </pre>
            
            <h3 id="traitement-formulaire">Traitement de formulaire</h3>
            <pre>
# Formulaire HTML
<code>&lt;form method="post" action="traitement.php">
    &lt;input type="text" name="nom" placeholder="Votre nom">
    &lt;input type="email" name="email" placeholder="Votre email">
    &lt;button type="submit">Envoyer&lt;/button>
&lt;/form></code>

# Dans traitement.php
<code>if ($_SERVER["REQUEST_METHOD"] == "POST") {
    $nom = htmlspecialchars($_POST["nom"]);
    $email = filter_var($_POST["email"], FILTER_SANITIZE_EMAIL);
    
    if (empty($nom) || !filter_var($email, FILTER_VALIDATE_EMAIL)) {
        echo "Erreur dans le formulaire";
    } else {
        echo "Bonjour, " . $nom . " !";
    }
}</code>
            </pre>
            
            <h3 id="inclusion-fichiers">Inclusion de fichiers</h3>
            <pre>
# header.php
<code>&lt;?php
function entete() {
    echo "&lt;header>Mon Site&lt;/header>";
}
?&gt;</code>

# index.php
<code>&lt;?php
include 'header.php';
entete();
echo "Contenu de la page";
?&gt;</code>
            </pre>
        </section>

        <section id="avance">
            <h2>Niveau Avancé</h2>
            
            <h3 id="poo">Programmation Orientée Objet</h3>
            <pre>
# Définition d'une classe
<code>class Utilisateur {
    // Propriétés
    private $id;
    private $nom;
    private $email;
    
    // Constructeur
    public function __construct($id, $nom, $email) {
        $this->id = $id;
        $this->nom = $nom;
        $this->email = $email;
    }
    
    // Méthodes
    public function getNom() {
        return $this->nom;
    }
    
    public function setNom($nom) {
        $this->nom = $nom;
    }
    
    // Méthode statique
    public static function verifierEmail($email) {
        return filter_var($email, FILTER_VALIDATE_EMAIL) !== false;
    }
}</code>

# Utilisation de la classe
<code>$user = new Utilisateur(1, "Dupont", "jean@exemple.com");
echo $user->getNom();  // Affiche "Dupont"
$user->setNom("Martin");
$valide = Utilisateur::verifierEmail("jean@exemple.com"); // Méthode statique</code>
            </pre>
            
            <h3 id="heritage-interfaces">Héritage et interfaces</h3>
            <pre>
# Classe parente
<code>class Personne {
    protected $nom;
    
    public function __construct($nom) {
        $this->nom = $nom;
    }
    
    public function sePresenter() {
        return "Je m'appelle {$this->nom}";
    }
}</code>

# Interface
<code>interface Travailleur {
    public function travailler();
}</code>

# Classe enfant qui implémente une interface
<code>class Employe extends Personne implements Travailleur {
    private $fonction;
    
    public function __construct($nom, $fonction) {
        parent::__construct($nom);
        $this->fonction = $fonction;
    }
    
    public function sePresenter() {
        return parent::sePresenter() . " et je suis {$this->fonction}";
    }
    
    public function travailler() {
        return "Je travaille en tant que {$this->fonction}";
    }
}</code>

# Utilisation
<code>$dev = new Employe("Marie", "développeuse");
echo $dev->sePresenter();
echo $dev->travailler();</code>
            </pre>
            
            <h3 id="namespace-autoloading">Namespace et autoloading</h3>
            <pre>
# Fichier: src/Models/Utilisateur.php
<code>namespace App\Models;

class Utilisateur {
    public function __construct() {
        // ...
    }
}</code>

# Fichier: index.php
<code>require 'vendor/autoload.php';

use App\Models\Utilisateur;

$user = new Utilisateur();</code>
            </pre>
            
            <h3 id="bases-donnees">Bases de Données avec PDO</h3>
            <pre>
# Connexion à la base de données
<code>try {
    $pdo = new PDO(
        'mysql:host=localhost;dbname=ma_base;charset=utf8',
        'utilisateur',
        'mot_de_passe',
        [PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION]
    );
} catch (PDOException $e) {
    echo "Erreur de connexion : " . $e->getMessage();
    exit;
}</code>

# Create (Créer)
<code>$stmt = $pdo->prepare("INSERT INTO utilisateurs (nom, email) VALUES (?, ?)");
$stmt->execute(['Jean', 'jean@exemple.com']);
$dernierId = $pdo->lastInsertId();</code>

# Read (Lire)
<code>$stmt = $pdo->prepare("SELECT * FROM utilisateurs WHERE id = ?");
$stmt->execute([1]);
$utilisateur = $stmt->fetch(PDO::FETCH_ASSOC);</code>

# Update (Mettre à jour)
<code>$stmt = $pdo->prepare("UPDATE utilisateurs SET email = ? WHERE id = ?");
$stmt->execute(['nouveau@exemple.com', 1]);</code>

# Delete (Supprimer)
<code>$stmt = $pdo->prepare("DELETE FROM utilisateurs WHERE id = ?");
$stmt->execute([1]);</code>

# Transactions
<code>try {
    $pdo->beginTransaction();
    
    $stmt1 = $pdo->prepare("INSERT INTO commandes (client_id, total) VALUES (?, ?)");
    $stmt1->execute([5, 99.90]);
    $commandeId = $pdo->lastInsertId();
    
    $stmt2 = $pdo->prepare("INSERT INTO details_commande (commande_id, produit_id, quantite) VALUES (?, ?, ?)");
    $stmt2->execute([$commandeId, 123, 2]);
    
    $pdo->commit();
} catch (Exception $e) {
    $pdo->rollBack();
    echo "Erreur : " . $e->getMessage();
}</code>
            </pre>
            
            <h3 id="gestion-erreurs">Gestion des erreurs et exceptions</h3>
            <pre>
# Personnalisation de la gestion des erreurs
<code>function gestionErreurs($errno, $errstr, $errfile, $errline) {
    echo "Erreur [$errno] : $errstr dans $errfile à la ligne $errline";
    // Enregistrer dans un fichier de log
    error_log("Erreur [$errno] : $errstr dans $errfile à la ligne $errline");
    return true;
}
set_error_handler('gestionErreurs');</code>

# Exceptions personnalisées
<code>class DatabaseException extends Exception {
    public function __construct($message, $code = 0, Exception $previous = null) {
        parent::__construct($message, $code, $previous);
    }
}</code>

# Utilisation des exceptions
<code>try {
    $db = new PDO('mysql:host=localhost;dbname=inexistante', 'user', 'pass');
} catch (PDOException $e) {
    throw new DatabaseException("Erreur de connexion à la base : " . $e->getMessage());
} finally {
    echo "Tentative de connexion terminée";
}</code>
            </pre>
        </section>

        <section id="frameworks">
            <h2>Frameworks PHP</h2>
            <p>Les frameworks PHP facilitent le développement d'applications en fournissant une structure et des outils prêts à l'emploi :</p>
            
            <h3 id="frameworks-complets">Frameworks Complets</h3>
            <ul>
                <li><strong>Laravel</strong> : Framework moderne et élégant avec une syntaxe expressive, une architecture MVC robuste et un écosystème complet (Eloquent ORM, Blade, Artisan CLI)</li>
                <li><strong>Symfony</strong> : Framework professionnel et modulaire, très utilisé pour les applications d'entreprise avec des composants réutilisables</li>
                <li><strong>CodeIgniter</strong> : Framework léger et rapide avec une documentation claire, facile à prendre en main pour les débutants</li>
                <li><strong>CakePHP</strong> : Framework intuitif suivant la convention sur configuration, avec un ORM puissant et des fonctionnalités de sécurité</li>
                <li><strong>Yii</strong> : Framework haute performance avec génération de code et un système de cache efficace</li>
            </ul>

            <h3 id="micro-frameworks">Micro-frameworks</h3>
            <ul>
                <li><strong>Slim</strong> : Micro-framework minimaliste idéal pour les API RESTful et les petites applications</li>
                <li><strong>Lumen</strong> : Version allégée de Laravel optimisée pour les microservices et les API</li>
                <li><strong>Silex</strong> : Micro-framework basé sur des composants Symfony</li>
            </ul>

            <h3 id="cms-php">CMS basés sur PHP</h3>
            <ul>
                <li><strong>WordPress</strong> : CMS le plus populaire, idéal pour les blogs et sites simples avec de nombreux plugins</li>
                <li><strong>Drupal</strong> : CMS puissant et flexible pour les sites complexes avec beaucoup de contenu</li>
                <li><strong>Joomla</strong> : CMS intermédiaire entre WordPress et Drupal en termes de complexité</li>
                <li><strong>Magento</strong> : Plateforme e-commerce complète pour les boutiques en ligne</li>
            </ul>

            <h3 id="exemple-laravel">Exemple d'utilisation de Laravel</h3>
            <pre>
# Création d'une route dans routes/web.php
<code>Route::get('/utilisateurs/{id}', function ($id) {
    $utilisateur = App\Models\Utilisateur::find($id);
    return view('profile', ['utilisateur' => $utilisateur]);
});</code>

# Modèle Eloquent ORM (app/Models/Utilisateur.php)
<code>namespace App\Models;

use Illuminate\Database\Eloquent\Model;

class Utilisateur extends Model
{
    protected $fillable = ['nom', 'email'];
    
    public function articles()
    {
        return $this->hasMany(Article::class);
    }
}</code>
            </pre>
        </section>

        <section id="securite">
            <h2>Sécurité</h2>
            
            <h3 id="protections-essentielles">Protections essentielles</h3>
            <ul>
                <li><strong>Injection SQL</strong> : Utilisez toujours des requêtes préparées avec PDO</li>
                <li><strong>XSS</strong> : Échappez les sorties avec htmlspecialchars()</li>
                <li><strong>CSRF</strong> : Utilisez des tokens pour vos formulaires</li>
                <li><strong>Mots de passe</strong> : Utilisez password_hash() et password_verify()</li>
                <li><strong>Sessions</strong> : Régénérez l'ID de session pour éviter la fixation</li>
                <li><strong>Fichiers</strong> : Validez toujours le type et la taille des fichiers uploadés</li>
            </ul>
            
            <h3 id="hashage-securise">Exemple de hashage sécurisé</h3>
            <pre>
# Stockage d'un mot de passe
<code>$mot_de_passe = "MotDePasse123";
$hash = password_hash($mot_de_passe, PASSWORD_DEFAULT);</code>

# Vérification d'un mot de passe
<code>if (password_verify($mot_de_passe, $hash)) {
    echo "Mot de passe correct !";
}</code>
            </pre>
            
            <h3 id="protection-csrf">Protection CSRF</h3>
            <pre>
# Générer un token CSRF dans votre formulaire
<code>session_start();
$token = bin2hex(random_bytes(32));
$_SESSION['csrf_token'] = $token;</code>

# Formulaire avec token CSRF
<code>echo '&lt;form method="post" action="traitement.php">';
echo '&lt;input type="hidden" name="csrf_token" value="' . $token . '">';
echo '&lt;input type="text" name="nom">';
echo '&lt;button type="submit">Envoyer&lt;/button>';
echo '&lt;/form>';</code>

# Vérifier le token dans traitement.php
<code>session_start();
if (!isset($_POST['csrf_token']) || $_POST['csrf_token'] !== $_SESSION['csrf_token']) {
    die('Erreur de validation CSRF');
}
// Traitement du formulaire...</code>
            </pre>
        </section>

        <section id="bonnes-pratiques">
            <h2>Bonnes Pratiques</h2>
            <ul>
                <li><strong>Architecture MVC</strong> : Séparez le modèle (données), la vue (affichage) et le contrôleur (logique)</li>
                <li><strong>Validation des données</strong> : Validez toujours les données côté serveur, jamais uniquement côté client</li>
                <li><strong>DRY (Don't Repeat Yourself)</strong> : Utilisez des fonctions et des inclusions pour éviter la répétition</li>
                <li><strong>Gestion des erreurs</strong> : Utilisez try/catch pour gérer les exceptions</li>
                <li><strong>Configuration</strong> : Stockez les informations sensibles dans des fichiers .env hors du dépôt</li>
                <li><strong>Nommage</strong> : Utilisez des noms de variables et fonctions clairs (camelCase recommandé)</li>
                <li><strong>Documentation</strong> : Commentez votre code avec PHPDoc pour une meilleure maintenabilité</li>
                <li><strong>Composer</strong> : Utilisez Composer pour gérer vos dépendances</li>
                <li><strong>Tests unitaires</strong> : Testez votre code avec PHPUnit ou un autre framework de test</li>
                <li><strong>PSR</strong> : Suivez les recommandations PSR (PHP Standards Recommendations)</li>
            </ul>
            
            <h3 id="structure-projet">Structure de projet recommandée</h3>
            <pre>
# Organisation typique d'un projet PHP moderne
<code>mon_projet/
├── config/               # Fichiers de configuration
├── public/               # Point d'entrée public (index.php)
│   ├── assets/           # CSS, JS, images
│   └── index.php         # Front controller
├── src/                  # Code source de l'application
│   ├── Controllers/      # Contrôleurs
│   ├── Models/           # Modèles
│   └── Views/            # Vues
├── tests/                # Tests unitaires et fonctionnels
├── vendor/               # Dépendances (géré par Composer)
├── .env                  # Variables d'environnement
├── .gitignore            # Ignore les fichiers sensibles et vendor/
└── composer.json         # Configuration Composer</code>
            </pre>
        </section>

        <section id="ressources">
            <h2>Ressources Supplémentaires</h2>
            <p>Pour en savoir plus sur PHP, consultez les ressources suivantes :</p>
            <ul>
                <li><a href="https://www.php.net/manual/fr/" target="_blank">Documentation officielle de PHP</a></li>
                <li><a href="https://www.w3schools.com/php/" target="_blank">W3Schools PHP Tutorial</a></li>
                <li><a href="https://www.codecademy.com/learn/learn-php" target="_blank">Codecademy PHP Course</a></li>
                <li><a href="https://phptherightway.com/" target="_blank">PHP The Right Way</a> - Guide de bonnes pratiques</li>
                <li><a href="https://symfony.com/" target="_blank">Symfony</a> - Framework PHP populaire</li>
                <li><a href="https://laravel.com/" target="_blank">Laravel</a> - Framework PHP moderne</li>
                <li><a href="https://owasp.org/www-project-top-ten/" target="_blank">OWASP Top 10</a> - Risques de sécurité web</li>
            </ul>
        </section>
    </main>

    <footer>
        <p>&copy; 2023-2025 Mémo PHP. Tous droits réservés.</p>
    </footer>

    <script src="js/script-php.js"></script>
</body>
</html>